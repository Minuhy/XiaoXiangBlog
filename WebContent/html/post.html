<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
		<title>潇湘博客 - 首页</title>
		<!-- Bootstrap -->
	    <link rel="stylesheet" href="lib/bootstrap-3.4.1/css/bootstrap.css">
	
	    <!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
	    <!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
	    <!--[if lt IE 9]>
	      <script src="lib/html5shiv-3.7.3/html5shiv.min.js"></script>
	      <script src="lib/respond.js-1.4.2/respond.min.js"></script>
	    <![endif]-->
        <link rel="stylesheet" href="lib/xiaoxiang/css/backtop.css">
        <link href="lib/summernote-v0.8.20/summernote.css" rel="stylesheet">
        <style>
            .summernote{
                width: 100%;
            }
            .redtip{
                border: 3px red solid;
                border-radius: 8px;
            }
            .tipborder{
                border: 3px #fff solid;
                border-radius: 8px;
            }
        </style>
	</head>
	<body>
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <!-- 品牌和开关组合在一起，以实现更好的在移动端显示 -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">潇湘网络日记</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html">潇湘博客</a>
                </div>
          
                <!-- 导航链接、表单和其他内容以进行切换 -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                    <li><a href="index.html">首页</a></li>
                    <li><a href="blog.html">博客</a></li>
                    </ul>
                    <form class="navbar-form navbar-left">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="请输入关键词">
                        </div>
                        <button type="submit" class="btn btn-default">搜索</button>
                    </form>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#">发博客</a></li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">我的<span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="my.html">我的主页</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="#">退出登录</a></li>
                            </ul>
                        </li>
                    </ul>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
        </nav>
        
        <!-- 内容 -->
        <div class="container">

            <!-- 博客列表 -->
            <h1>发表博文</h1>
            <hr>
            <!-- 正文 -->
            <div class="form-group">
                <label for="blogTitle">博客标题</label>
                <div id="blogTitleArea" class="tipborder">
                    <input id="blogTitle" type="text" class="form-control" placeholder="请输入博客的标题" autofocus>
                </div>
            </div>
            <hr>
            <div class="form-group">
                <label for="summernote">博客正文</label>
                <div id="summernoteArea" class="tipborder">
                    <textarea id="summernote" class="summernote"></textarea>
                </div>
            </div>
            
            <div class="text-right">
                <button id="buttonPost" type="button" class="btn btn-primary">立即发表</button>
            </div>
        </div>

        <div onclick="window.scrollTo(0,0);return false;" style="display:none; background: url(img/backToTop.png) no-repeat scroll 0 0 transparent;" class="back-to" id="toolBackTop">
            <a title="返回顶部" onclick="window.scrollTo(0,0);return false;" href="#top" class="back-top">回到顶部</a>
        </div>
    
        <footer>
            <hr>
            <p class="lead text-center">本站由 <a href="https://space.bilibili.com/32778000">敏Ymm</a> 使用
                <a href="https://www.runoob.com/jsp/jsp-tutorial.html">JSP</a>
                <span class="glyphicon glyphicon-plus" style="font-size: 16px;" aria-hidden="true"></span>
                <a href="https://v3.bootcss.com/">Bootstrap</a>
                技术实现
            </p>
            <p class="text-center" style="padding-bottom: 70px;">
                <a href="#top">
                    &copy; 2023
                </a>
            </p>
          </footer>

		<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
        <script src="lib/jquery-1.12.4/jquery.js"></script>
        <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
        <script src="lib/bootstrap-3.4.1/js/bootstrap.js"></script>
        <script src="lib/xiaoxiang/js/backtop.js"></script>
        <script src="lib/xiaoxiang/js/toast.js"></script>
        <script src="lib/summernote-v0.8.20/summernote.js"></script>
        <script src="lib/summernote-v0.8.20/lang/summernote-zh-CN.js"></script>
        <script>
            $(function() {
                $('#summernote').summernote({
                    height: 400,    //设置高度
                    toolbar: [      //自定义工具栏
                        ['color',['color']],
                        ['style',['style']],
                        ['fontname',['fontname']],
                        ['font',['bold','underline','clear']],
                        ['para',['ul','ol','paragraph', 'height', 'hr']],
                        ['insert',['table','link']],
                        ['option',['undo','redo']], //撤销 取消撤销
                        ['view',['fullscreen','codeview','help']]
                    ],
                    disableDragAndDrop: true ,//禁用拖放功能
                    dialogsInBody: true,  //对话框放在编辑框还是Body
                    dialogsFade: true ,//对话框显示效果
                    tabsize : 4,
                    lang : 'zh-CN',
                    callbacks : {     // 回调函数
                        //清除word复制的格式
                        onPaste: function (ne) {
                            var bufferText = ((ne.originalEvent || ne).clipboardData || window.clipboardData).getData('Text/plain');
                            ne.preventDefault ? ne.preventDefault() : (ne.returnValue = false);
                            setTimeout(function () {
                                document.execCommand("insertText", false, bufferText);
                            }, 10);
                        }
                    }
                });
            });
        </script>
        <script>
            $("#buttonPost").click(function(){
                let titleText = $("#blogTitle").val(); // 拿到标题文本
                if(titleText.length === 0){
                    // 标题为空
                    Toast("请输入标题",2000);
                    $("#blogTitleArea").removeClass("tipborder");
                    $("#blogTitleArea").addClass("redtip");
                    
                    setTimeout(function() { 
                        $("#blogTitleArea").removeClass("redtip");
                        $("#blogTitleArea").addClass("tipborder");
                     }, 2200);
                    return;
                }
                console.log("标题 "+titleText);

                let contentTextarea = $("#summernote");
                if (contentTextarea.summernote('isEmpty')) { 
                    // 正文为空
                    Toast("请输入正文",2000);
                    $("#summernoteArea").removeClass("tipborder");
                    $("#summernoteArea").addClass("redtip");
                    
                    setTimeout(function() { 
                        $("#summernoteArea").removeClass("redtip");
                        $("#summernoteArea").addClass("tipborder");
                     }, 2200);
                    return;
                }

                let contentText = contentTextarea.summernote('code');
                console.log("正文 "+contentText);

                // $.post("/try/ajax/demo_test_post.php",{
                //     name:"菜鸟教程",
                //     url:"http://www.runoob.com"
                // },
                // function(data,status){
                //     alert("数据: \n" + data + "\n状态: " + status);
                // });

            });
        </script>
	</body>
</html>